
-- Update existing multi-discount events

CREATE TABLE IF NOT EXISTS EVENT_DISCOUNT (
	ID INT NOT NULL AUTO_INCREMENT,
	DISCOUNT_EVENT_ID INT NOT NULL,
	EVENT_ID INT NOT NULL,
	CONSTRAINT PK_EVENT_DISCOUNT PRIMARY KEY (ID),
	CONSTRAINT FK_EVENT_DISCOUNT_E_D_ID FOREIGN KEY (DISCOUNT_EVENT_ID)
		REFERENCES EVENT (ID),
	CONSTRAINT FK_EVENT_DISCOUNT_E_ID FOREIGN KEY (EVENT_ID)
		REFERENCES EVENT (ID)
);

INSERT INTO EVENT_DISCOUNT
	(DISCOUNT_EVENT_ID, EVENT_ID)
VALUES
	(16,14),
	(16,15),
	(23,18),
	(23,19),
	(23,20),
	(23,21),
	(23,22),
	(51,47),
	(51,48),
	(51,49),
	(51,50),
	(12,52),
	(12,53),
	(12,54),
	(12,55),
	(12,56),
	(12,57),
	(12,58),
	(12,59),
	(61,1),
	(62,1)
;


INSERT INTO CHANGELOG
	(SCRIPT, RUN_DATE)
VALUES
	('010001008_Create_Table_Event_Discount.sql',NOW())
;

COMMIT;